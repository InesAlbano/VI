<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Social Inequalities</title>

    <link rel="stylesheet" href="css/style.css">
    
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
    <section class="container">
        <div class="one">
          <form id="myForm" action="" method="POST">
              <!--<span id="logo">Social Inequalities</span>-->
              <img src="img/logo.png" style="width: 60%; text-align: center; margin-left: 35px">

              <li>
                  <div class="multiselect">
                      <div class="selectBox" onclick="showCheckboxes()">
                          <select>
                              <option>Select the countries...</option>
                          </select>
                          <div class="overSelect"></div>
                      </div>
                      <div id="checkboxes">
                          <label for="BE"></label><input type="checkbox" name="country" value="BE"  id="BE" />BE</label>
                          <label for="BG"></label><input type="checkbox" name="country" value="BG"  id="BG" />BG</label>
                          <label for="CZ"></label><input type="checkbox" name="country" value="CZ"  id="CZ" />CZ</label>
                          <label for="DK"></label><input type="checkbox" name="country" value="DK"  id="DK" />DK</label>
                          <label for="DE"></label><input type="checkbox" name="country" value="DE"  id="DE" />DE</label>
                          <label for="EE"></label><input type="checkbox" name="country" value="EE"  id="EE" />EE</label>
                          <label for="IE"></label><input type="checkbox" name="country" value="IE"  id="IE" />IE</label>
                          <label for="EL"></label><input type="checkbox" name="country" value="EL"  id="EL" />EL</label>
                          <label for="ES"></label><input type="checkbox" name="country" value="ES"  id="ES" />ES</label>
                          <label for="FR"></label><input type="checkbox" name="country" value="FR"  id="FR" />FR</label>
                          <label for="HR"></label><input type="checkbox" name="country" value="HR"  id="HR" />HR</label>
                          <label for="IT"></label><input type="checkbox" name="country" value="IT"  id="IT" />IT</label>
                          <label for="CY"></label><input type="checkbox" name="country" value="CY"  id="CY" />CY</label>
                          <label for="LV"></label><input type="checkbox" name="country" value="LV"  id="LV" />LV</label>
                          <label for="LT"></label><input type="checkbox" name="country" value="LT"  id="LT" />LT</label>
                          <label for="LU"></label><input type="checkbox" name="country" value="LU"  id="LU" />LU</label>
                          <label for="HU"></label><input type="checkbox" name="country" value="HU"  id="HU" />HU</label>
                          <label for="MT"></label><input type="checkbox" name="country" value="MT"  id="MT" />MT</label>
                          <label for="NL"></label><input type="checkbox" name="country" value="NL"  id="NL" />NL</label>
                          <label for="AT"></label><input type="checkbox" name="country" value="AT"  id="AT" />AT</label>
                          <label for="PL"></label><input type="checkbox" name="country" value="PL"  id="PL" />PL</label>
                          <label for="PT"></label><input type="checkbox" name="country" value="PT"  id="PT" />PT</label>
                          <label for="RO"></label><input type="checkbox" name="country" value="RO"  id="RO" />RO</label>
                          <label for="SI"></label><input type="checkbox" name="country" value="SI"  id="SI" />SI</label>
                          <label for="SK"></label><input type="checkbox" name="country" value="SK"  id="SK" />SK</label>
                          <label for="FI"></label><input type="checkbox" name="country" value="FI"  id="FI" />FI</label>
                          <label for="SE"></label><input type="checkbox" name="country" value="SE"  id="SE" />SE</label>
                      </div>
                  </div>
              </li>
              <li>
                <div class="switch-toggle switch-3 switch-candy" style="margin-left: 5px;">
                    <input type="radio" id="0-2" name="education" value="0-2" class="switch-toggle-item"><label for="0-2" onclick="">ED0_2</label>
                    <input type="radio" id="3-4" name="education" value="3-4" class="switch-toggle-item"><label for="3-4" onclick="">ED3_4</label>
                    <input type="radio" id="5-8" name="education" value="5-8" class="switch-toggle-item"><label for="5-8" onclick="">ED5_8</label>
                </div><br>
              </li>
              <br>
              <li>
                <div style="margin-left: 55px">
                    <label class="container-checkbox" for="2010"><input type="checkbox" id="2010" name="year" value="2010"/><span class="checkmark"></span>2010</label>
                    <label class="container-checkbox" for="2011"><input type="checkbox" id="2011" name="year" value="2011"/><span class="checkmark"></span>2011</label>
                    <label class="container-checkbox" for="2012"><input type="checkbox" id="2012" name="year" value="2012"/><span class="checkmark"></span>2012</label>
                    <label class="container-checkbox" for="2013"><input type="checkbox" id="2013" name="year" value="2013"/><span class="checkmark"></span>2013</label>
                    <label class="container-checkbox" for="2014"><input type="checkbox" id="2014" name="year" value="2014"/><span class="checkmark"></span>2014</label>
                    <label class="container-checkbox" for="2015"><input type="checkbox" id="2015" name="year" value="2015"/><span class="checkmark"></span>2015</label>
                    <label class="container-checkbox" for="2016"><input type="checkbox" id="2016" name="year" value="2016"/><span class="checkmark"></span>2016</label>
                    <label class="container-checkbox" for="2017"><input type="checkbox" id="2017" name="year" value="2017"/><span class="checkmark"></span>2017</label>
                    <label class="container-checkbox" for="2018"><input type="checkbox" id="2018" name="year" value="2018"/><span class="checkmark"></span>2018</label>
                    <label class="container-checkbox" for="2019"><input type="checkbox" id="2019" name="year" value="2019"/><span class="checkmark"></span>2019</label>
                </div> <br>
              </li>
              <li>
                  <!--<input type="button" class="button-menu" value="GDP">-->
                  <div class="radio-toolbar">
                      <input type="radio" id="GDP" name="variables" value="GDP"><label for="GDP">GDP</label><br>
                      <input type="radio" id="Employment" name="variables" value="Employment"><label for="Employment">Employment</label><br>
                      <input type="radio" id="Income" name="variables" value="Income"><label for="Income">Income</label><br>
                      <input type="radio" id="Education" name="variables" value="Education"><label for="Education">Education</label><br>
                      <input type="radio" id="Women-high-pos" name="variables" value="Women-high-pos"><label for="Women-high-pos">Women in High Positions</label><br>
                      <input type="radio" id="Poverty" name="variables" value="Poverty"><label for="Poverty">Poverty Level</label><br>
                      <input type="radio" id="GWG" name="variables" value="GWG"><label for="GWG">Gender Wage Gap</label>
                  </div>
              </li>
              <li><button type="button" id="button-forms" value="Go" onclick="myFunction(this)">Go</li>
          </form>
        </div>

        <div class="two">
            <div class="container">
                <div id="cleveland-holder" style="background-color: rgba(227, 224, 224, 0.1); border-radius: 15px;" class="right-div">
                    Clevaland Dot Plot
                </div>

                <div id="map-holder" style="background-color: rgba(227, 224, 224, 0.1); border-radius: 15px;" class="left-div">
                    <script src="js/map.js"></script>
                    Choropleth Map
                </div>
            </div>
            <br>
            <div class="container">
                <div id="line_chart" style="background-color: rgba(227, 224, 224, 0.1); border-radius: 15px;" class="left-div">
                    <!-- radio button options diana: employment, poverty, GDP -->
                    <script src="js/line_chart.js"></script> 
                </div>

                <div id="slope-holder" style="background-color: rgba(227, 224, 224, 0.1); border-radius: 15px;" class="right-div">
                    Slope Chart
                </div>
            </div>

        </div>
    </section>

</body>
</html>

<style>
.container {
  width: 100%;
  height: 100%;
  display : flex;
}

.one {
  width: 200px;
  height: 100%;
  float: left;
}

.two {
  margin-left: 20px;
  width: 100%;
  height: 100%;
  padding-right: 10px;
  padding-top: 10px;
  display:table;
  table-layout:fixed;
}

.left-div {
  float: left;
  text-align: center;
  flex: 1;
  overflow-x: hidden;
  margin-left: 15px;
}

.right-div {
  text-align: center;
  flex: 1;
  margin-left: 15px;
}

#myForm {
  height: 100%;
  width: 200px;
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #111;
  overflow-x: hidden;
  padding-top: 20px;
}

.switch-toggle-item {
  padding: 10px 20px;
  font-family: sans-serif, Arial;
  border-radius: 4px;
  width: 10px;
  text-align: center;
}

.switch-toggle {
  float: left;
  background-color: #878787;
  padding-left: 1px;
  padding-right: 1px;
  border: 5px solid #E3E0E0;
  border-radius: 4px;
}
.switch-toggle input {
  position: absolute;
  opacity: 0;
}
.switch-toggle input + label {
  padding: 3px;
  float:left;
  color: black;
  cursor: pointer;
  border: 1px solid #878787;
}

.switch-toggle input:checked + label {
  background-color: #AFAFAF;
  cursor: pointer;
  border: 1px solid #1A1C1F;
  border-radius: 4px;
}

.container-checkbox {
  display: block;
  position: relative;
  padding-left: 20px;
  margin-top: 15px;
  cursor: pointer;
}

.container-checkbox input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 12px;
  width: 12px;
  border-radius: 6px;
  background-color: #AFAFAF;
  border: 0.5px solid #AFAFAF;
}

.container-checkbox:hover input ~ .checkmark {
  background-color: #e2c9a2;
  border: 0.5px solid #e2c9a2;
}

.container-checkbox input:checked ~ .checkmark {
  background-color: #E0C090;
  border: 0.5px solid #e4a950;
}

.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}


</style>

<script>
    var expanded = false;
    var expanded1 = false;

    function showCheckboxes() {
        var checkboxes = document.getElementById("checkboxes"); //countries
        if (!expanded) {
            checkboxes.style.display = "block";
            expanded = true;
        } else {
            checkboxes.style.display = "none";
            expanded = false;
        }
    }

    /* to remove after */
    function showCheckboxes1() {
        var checkboxes1 = document.getElementById("checkboxes1"); //years
        if (!expanded1) {
            checkboxes1.style.display = "block";
            expanded1 = true;
        } else {
            checkboxes1.style.display = "none";
            expanded1 = false;
        }
    }
</script>

<script>

function checkMiddleBoxes(enabledYears, size){
  let years = ["2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"];
  var initialYear = enabledYears[0];
  var nextYear = '' + (parseInt(enabledYears[0])+1);

  while(nextYear != enabledYears[enabledYears.length-1]){
    document.getElementById(nextYear).checked = true;
    nextYear = '' + (parseInt(nextYear)+1);
  }

}

var checkboxes = document.querySelectorAll("input[type=checkbox][name=year]");
let enabledSettings = []
checkboxes.forEach(function(checkbox) {
  checkbox.addEventListener('change', function() {
    enabledSettings = Array.from(checkboxes).filter(i => i.checked).map(i => i.value);
    if (enabledSettings.length > 1) 
      checkMiddleBoxes(enabledSettings, enabledSettings.length);
  })
});




  function myFunction(event) {
    localStorage.clear();
    var countries = [];
    var education = '';
    var years = [];
    var variable = '';


    /*get countries */
    checkboxes = document.getElementsByName("country");
    for (let i=0; i < checkboxes.length; ++i){
        if(checkboxes[i].checked==true)
            countries.push(checkboxes[i].value);
    }

    /*get education*/
    checkboxes = document.getElementsByName("education");
    for (let i=0; i < checkboxes.length; ++i){
        if(checkboxes[i].checked==true){
            education = checkboxes[i].value;
            break;
        }
    }

    /*get years */
    checkboxes = document.getElementsByName("year");
    for (let i=0; i < checkboxes.length; ++i){
        if(checkboxes[i].checked==true)
            years.push(parseInt(checkboxes[i].value));
    }

    /*get bottom variables*/
    checkboxes = document.getElementsByName("variables");
    for (let i=0; i < checkboxes.length; ++i){
        if(checkboxes[i].checked==true){
            variable = checkboxes[i].value;
        }
    }

    if (countries.length == 0 || education == '' || years.length == 0 || variable == '')
        alert('Complete all options.');
    else {
        localStorage.setItem("education", education);
        localStorage.setItem("variable", variable);

        if(countries.length > 1) { // Case: more than 1 country is selected
            localStorage.setItem("countries", JSON.stringify(countries));
        }
        else{ // Case: only 1 country is selected
            localStorage.setItem("countries", countries);
        }
        if(years.length > 1) { // Case: more than 1 year is selected
            localStorage.setItem("years", JSON.stringify(years));
        }
        else { // Case: Only 1 year is selected
            localStorage.setItem("years", years);
        }
    }
  }
</script>
